(this["webpackJsonppi-weather"]=this["webpackJsonppi-weather"]||[]).push([[0],{172:function(e,t,a){e.exports=a(401)},177:function(e,t,a){},178:function(e,t){e.exports={_getTimespanDayLabels:function(e,t){for(var a=[],i=t.getDate(),r=this._getDaysInMonth(t.getMonth(),t.getFullYear()),n=0;n<e;n++){var s=i-e+n;s<1&&(s+=r),a.push(s)}return a},_getTimespanPredefinedLabels:function(e,t){var a=[],i=[],r=0;switch(e){case 7:i=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],r=t.getDay();break;case 365:i=["January","February","March","April","May","June","July","August","September","October","November","December"],r=t.getMonth()}for(var n=i.length,s=0;s<n;s++){var o=r-n+s;o<0&&(o+=n),a.push(i[o])}return a},formatTimespanLabels:function(e){var t=[],a=new Date;switch(e){case 1:for(var i=0;i<24;i++){var r=a.getHours()-24+i;r<0&&(r+=24),t.push(r+":00")}break;case 7:t=this._getTimespanPredefinedLabels(e,a);break;case 30:t=this._getTimespanDayLabels(e,a);break;case 365:t=this._getTimespanPredefinedLabels(e,a);break;default:t=this._getTimespanDayLabels(e,a)}return t},_getDaysInMonth:function(e,t){return new Date(t,e,0).getDate()}}},193:function(e,t){},195:function(e,t){},225:function(e,t){},226:function(e,t){},270:function(e,t){},272:function(e,t){},295:function(e,t){},399:function(e,t,a){},400:function(e,t,a){},401:function(e,t,a){"use strict";a.r(t);var i=a(2),r=a.n(i),n=a(97),s=a.n(n),o=(a(177),a(28)),u=a(29),c=a(32),l=a(30),h=a(31),m=a(98),p=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handleClick",value:function(){var e=this,t=Number(this.props.name.split(" ")[0]),a=[m.fetchChartData("temperature",t),m.fetchChartData("humidity",t),m.fetchChartData("pressure",t),m.fetchChartData("airQuality",t)];Promise.all(a).then((function(a){e.props.main.setState({timespan:t,chartData:a})}))}},{key:"render",value:function(){return r.a.createElement("button",{className:"button",onClick:this.handleClick.bind(this)},this.props.name)}}]),t}(i.Component),d=a(386).Line,b=window.innerWidth,y=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e={};switch(this.props.type){case"Temperature":e=this.props.main.state.chartData[0];break;case"Humidity":e=this.props.main.state.chartData[1];break;case"Pressure":e=this.props.main.state.chartData[2];break;case"Air quality":e=this.props.main.state.chartData[3]}return r.a.createElement("div",{className:"chart"},r.a.createElement("p",null,this.props.type," over the last ",this.props.main.state.timespan," day(s)"),r.a.createElement(d,{className:"lineChart",data:e,redraw:!0,width:b-25,height:250}))}}]),t}(i.Component),f=a(66),g=(a(399),a(99)),v=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(l.a)(t).call(this,e))).iTemperature=0,a.iHumidity=0,a.iPressure=0,a.iAirQuality=0,a.state={temperature:a.iTemperature,humidity:a.iHumidity,pressure:a.iPressure,airQuality:a.iAirQuality,time:(new Date).toLocaleTimeString()},a.update=a.update.bind(Object(f.a)(a)),setInterval(a.update,1e3),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"update",value:function(){g({url:"http://192.168.178.21:8000/",method:"GET",json:!0},function(e,t,a){if(!e&&200===t.statusCode&&a){var i=a;this.iTemperature=i.temperature,this.iHumidity=i.humidity,this.iPressure=i.pressure,this.iAirQuality=i.airQuality}else e&&console.error(e);0!==this.iTemperature&&0!==this.iHumidity&&0!==this.iPressure&&0!==this.iAirQuality?this.setState({temperature:this.iTemperature,humidity:this.iHumidity,pressure:this.iPressure,airQuality:this.iAirQuality,time:(new Date).toLocaleTimeString()}):(this.setState({time:(new Date).toLocaleTimeString()}),console.log("broke"))}.bind(this))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"liveData"},r.a.createElement("p",null,"Temperature: ",this.state.temperature,"\xb0C | Humidity: ",this.state.humidity,"% | Pressure: ",this.state.pressure,"mBar | Air quality: ",this.state.airQuality)),r.a.createElement("div",{className:"time"},r.a.createElement("p",null,this.state.time)))}}]),t}(i.Component),D=(a(400),a(98)),C=1,k=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(c.a)(this,Object(l.a)(t).call(this,e))).state={timespan:C,chartData:[{},{},{},{}]};var i=[D.fetchChartData("temperature",C),D.fetchChartData("humidity",C),D.fetchChartData("pressure",C),D.fetchChartData("airQuality",C)];return Promise.all(i).then((function(e){a.setState({timespan:C,chartData:e}),a.render()})),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"content"},r.a.createElement(v,null),r.a.createElement("div",{className:"buttons"},r.a.createElement(p,{name:"365 days",main:this}),r.a.createElement(p,{name:"30 days",main:this}),r.a.createElement(p,{name:"7 days",main:this}),r.a.createElement(p,{name:"1 day",main:this})),r.a.createElement(y,{type:"Temperature",main:this}),r.a.createElement(y,{type:"Humidity",main:this}),r.a.createElement(y,{type:"Pressure",main:this}),r.a.createElement(y,{type:"Air quality",main:this}))}}]),t}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},98:function(e,t,a){var i=a(178),r=a(99);e.exports={fetchChartData:function(e,t){return new Promise((function(a){r({url:"http://192.168.178.33:4000/"+e,method:"GET",json:!0},(function(r,n,s){if(!r&&200===n.statusCode){var o=i.formatTimespanLabels(t),u=s,c=[],l=[],h=[];u&&u[t]&&(c=u[t].min?u[t].min:[],l=u[t].avg?u[t].avg:[],h=u[t].max?u[t].max:[]),a({labels:o,datasets:[{label:"Min. "+e,fillColor:"rgba(220,220,220,0.2)",strokeColor:"rgba(220,220,220,1)",pointColor:"rgba(220,220,220,1)",pointHighlightStroke:"rgba(220,220,220,1)",data:c},{label:"Average "+e,fillColor:"rgba(220,220,220,0.2)",strokeColor:"rgba(220,220,220,1)",pointColor:"rgba(220,220,220,1)",pointHighlightStroke:"rgba(220,220,220,1)",data:l},{label:"Max. "+e,fillColor:"rgba(220,220,220,0.2)",strokeColor:"rgba(220,220,220,1)",pointColor:"rgba(220,220,220,1)",pointHighlightStroke:"rgba(220,220,220,1)",data:h}]})}}))}))}}}},[[172,1,2]]]);
//# sourceMappingURL=main.49da341b.chunk.js.map